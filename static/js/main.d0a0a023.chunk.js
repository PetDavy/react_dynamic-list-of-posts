(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(24)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),o=a(1),u=a.n(o),i=a(2),l=a(3),m=(a(16),a(17),"https://mate-api.herokuapp.com"),p=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e}))},f="".concat(m,"/posts"),d=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(a=e.sent,t){e.next=5;break}return e.abrupt("return",a);case 5:return e.abrupt("return",a.filter((function(e){return e.userId===t})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("".concat(f,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v="".concat(m,"/users"),E=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(v);case 2:return t=e.sent,e.abrupt("return",t.data.slice(0,10).map((function(e){return{id:e.id,name:e.name}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=(a(18),a(4)),N=a.n(h),w=(N.a.number.isRequired,N.a.number.isRequired,N.a.string.isRequired,N.a.number,N.a.number,N.a.string,a(5)),O=a.n(w),j=function(e){var t=e.id,a=e.title,n=e.user,s=e.isOpen,c=e.toggletPost;return r.a.createElement("li",{className:O()("PostsList__item",{"PostsList__item--open":s})},r.a.createElement("div",{className:"PostsList__item-wrapper"},r.a.createElement("i",{className:"PostsList__icon far fa-copy"}),r.a.createElement("div",{className:"PostsList__item-content"},r.a.createElement("div",{className:"PostsList__item-user"},n.name),r.a.createElement("div",{className:"PostsList__item-title"},a))),r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(t)}},s?"Hide":"Show"))},P=(a(21),function(){return r.a.createElement("div",{className:"Loader"},r.a.createElement("div",{className:"Loader__content"}))}),x=function(e){var t=e.posts,a=e.toggletPost,n=e.postId,s=e.users;return e.isLoading?r.a.createElement(P,null):r.a.createElement("div",{className:"PostsList"},r.a.createElement("h2",{className:"PostsList__title"},"Posts:"),r.a.createElement("ul",{className:"PostsList__list"},t.map((function(e){return r.a.createElement(j,{key:e.id,id:e.id,title:e.title,user:s.find((function(t){return t.id===e.userId})),isOpen:e.id===n,toggletPost:a})}))))},y="".concat(m,"/comments"),g=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("".concat(y));case 2:return a=e.sent,e.abrupt("return",a.data.filter((function(e){return e.postId===t&&e.body})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.values(a).some((function(e){return e}))){e.next=3;break}return e.abrupt("return",{ok:!1});case 3:if(!Object.values(t).some((function(e){return!e}))){e.next=5;break}return e.abrupt("return",{ok:!1});case 5:return e.next=7,fetch(y,{method:"POST",body:JSON.stringify(t)});case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/").concat(t.id),{method:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=a(6),S=a(7),I=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,L=function(e){var t=e.value,a=e.changeHandler,n=e.name,s=e.errors,c=e.setErrors,o=s[n],u=function(){var e="";t||(e="Please add ".concat(n)),t&&"email"===n&&!I.test(t)&&(e="Please add correct email adress"),c((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},n,e))}))};return r.a.createElement("div",{className:"Form-field"},"comment"!==n?r.a.createElement("input",{type:"text",name:n,placeholder:"Your ".concat(n),value:t,className:O()("NewCommentForm__input",{"NewCommentForm__error-input":o}),onChange:a,onBlur:u}):r.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:O()("NewCommentForm__input",{"NewCommentForm__error-input":o}),value:t,onChange:a,onBlur:u}),r.a.createElement("h5",{className:"error"},o))},A=(a(22),function(e){var t=e.postId,a=e.getComments,s=Object(n.useState)(""),c=Object(l.a)(s,2),o=c[0],m=c[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),d=f[0],b=f[1],_=Object(n.useState)(""),v=Object(l.a)(_,2),E=v[0],h=v[1],N=Object(n.useState)({}),w=Object(l.a)(N,2),O=w[0],j=w[1],P=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({postId:t,name:o,email:d,body:E},O),h(""),a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"PostDetails__form-wrapper"},r.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),P()}},r.a.createElement("header",{className:"NewCommentForm__header"},"New Comment"),r.a.createElement(L,{name:"name",value:o,changeHandler:function(e){m(e.target.value)},errors:O,setErrors:j}),r.a.createElement(L,{name:"email",value:d,changeHandler:function(e){b(e.target.value)},errors:O,setErrors:j}),r.a.createElement(L,{name:"comment",value:E,changeHandler:function(e){h(e.target.value)},errors:O,setErrors:j}),r.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button",value:E},"Add a comment")))}),F=function(e){var t=e.post,a=e.user,n=new Date(t.createdAt),s="\n    ".concat(n.getFullYear(),"/").concat(n.getMonth()+1,"/").concat(n.getDate(),"\n  ");return r.a.createElement("section",{className:"PostDetails__post"},r.a.createElement("h4",{className:"PostDetails__title"},t.title),r.a.createElement("div",{className:"PostDetails__info-wrapper"},r.a.createElement("i",{className:"PostDetails__icon fas fa-calendar-minus"}),r.a.createElement("div",{className:"PostDetails__general-info"},r.a.createElement("p",null,r.a.createElement("span",{className:"PostDetails__text"},"Created by"),r.a.createElement("span",{className:"blue-text"},a.name)),r.a.createElement("p",null,r.a.createElement("span",{className:"PostDetails__text"},"Created at"),r.a.createElement("span",{className:"blue-text"},s)))),r.a.createElement("p",{className:"PostDetails__body"},t.body))},q=(N.a.number.isRequired,N.a.string.isRequired,N.a.string.isRequired,function(e){var t=e.comments,a=e.isShownComments,n=e.setIsShownComments;return r.a.createElement("div",{className:"PostDetails__coments-info"},r.a.createElement("p",null,"".concat(t.length," Comments")),r.a.createElement("button",{type:"button",className:"PostDetails__button button",onClick:function(){return n(!a)}},r.a.createElement("i",{className:O()("fa-comment-dots","PostDetails__comments-icon",{fas:a,far:!a})}),a?"Hide":"Show"))}),H=function(e){var t=e.comments,a=e.handleDelete;return r.a.createElement("ul",{className:"PostDetails__list"},t.map((function(e){return r.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},r.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return a(e)}},r.a.createElement("i",{className:"fas fa-trash-alt"})),r.a.createElement("div",{className:"PostDetails__comment-wrapper"},r.a.createElement("h6",{className:"PostDetails__list-item-user"},r.a.createElement("b",null,e.name)),r.a.createElement("p",null,e.body)))})))},R=function(e){var t=e.comments,a=e.isShownComments,n=e.setIsShownComments,s=e.handleDelete;return r.a.createElement("section",{className:"PostDetails__comments"},!!t.length&&r.a.createElement(q,{comments:t,isShownComments:a,setIsShownComments:n}),a&&r.a.createElement(H,{comments:t,handleDelete:s}))},B=(a(23),function(e){var t=e.postId,a=e.users,s=Object(n.useState)(null),c=Object(l.a)(s,2),o=c[0],m=c[1],p=Object(n.useState)([]),f=Object(l.a)(p,2),d=f[0],b=f[1],v=Object(n.useState)(!1),E=Object(l.a)(v,2),h=E[0],N=E[1],w=Object(n.useState)(!1),O=Object(l.a)(w,2),j=O[0],x=O[1],y=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,_(t);case 3:a=e.sent,x(!1),m(a.data),N(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return b([]),e.abrupt("return");case 3:return e.next=5,g(t);case 5:a=e.sent,b(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(a),D(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){y(t),D(t)}),[t]),j)return r.a.createElement(P,null);if(o){var S=a.find((function(e){return e.id===o.userId}));return r.a.createElement("div",{className:"PostDetails"},r.a.createElement("div",{className:"PostDetails__wrapper"},r.a.createElement(F,{post:o,user:S}),r.a.createElement(R,{comments:d,isShownComments:h,setIsShownComments:N,handleDelete:C}),r.a.createElement(A,{postId:t,getComments:D})))}return r.a.createElement("div",{className:"PostDetails PostDetails__no-post"},r.a.createElement("h2",{className:"PostDetails"},"Post not selected"),r.a.createElement("i",{className:"PostDetails__no-post-icon fas fa-scroll"}))}),J=function(e){var t=e.userID,a=e.selectUser,n=e.users;return r.a.createElement("aside",{className:"App__aside"},r.a.createElement("label",{className:"App__aside-label"},r.a.createElement("h4",{className:"App__aside-title"},"Select a user: \xa0"),r.a.createElement("select",{className:"App__user-selector",value:t,onChange:a},r.a.createElement("option",{value:"0"},"All users"),n.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))))},T=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(0),o=Object(l.a)(c,2),m=o[0],p=o[1],f=Object(n.useState)([]),_=Object(l.a)(f,2),v=_[0],h=_[1],N=Object(n.useState)(0),w=Object(l.a)(N,2),O=w[0],j=w[1],P=Object(n.useState)(!0),y=Object(l.a)(P,2),g=y[0],D=y[1],k=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,p(Number(a)),e.next=4,b(Number(a));case 4:n=e.sent,r=n.map((function(e){return{id:e.id,userId:e.userId,title:e.title}})),h(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,D(!1),a=t.map((function(e){return{id:e.id,userId:e.userId,title:e.title}})),h(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){C(),S()}),[]);return r.a.createElement("div",{className:"App"},r.a.createElement(J,{userID:m,selectUser:k,users:a}),r.a.createElement("main",{className:"App__main"},r.a.createElement("div",{className:"App__sidebar"},r.a.createElement(x,{posts:v,toggletPost:function(e){j(e!==O?e:0)},postId:O,users:a,isLoading:g})),r.a.createElement("div",{className:"App__content"},r.a.createElement(B,{postId:O,users:a}))))};c.a.render(r.a.createElement(T,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.d0a0a023.chunk.js.map